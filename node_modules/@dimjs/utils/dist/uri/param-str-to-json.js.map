{"version":3,"file":"param-str-to-json.js","sources":["@dimjs/utils/src/uri/param-str-to-json.ts"],"sourcesContent":["import { getSearchParamStr } from './get-search-param-str.js';\n\n/**\n * @description\n * Converts a URL parameter string to a JSON object.\n *\n *\n * @example\n * ``` ts\n * paramStrToJson('https://www.domaiin.com/catalog/kzfoo-glasses?facetValueIds=5-15-41-31-2-1&page=1&price=ASC');\n * // => {\n * // =>  facetValueIds: '5-15-41-31-2-1',\n * // =>  page: '1',\n * // =>  price: 'ASC',\n * // => }\n * ```\n *\n * @param url - The URL containing the parameter string.\n * @returns The JSON object representing the parameter string.\n *\n * @docsCategory preference/utils/uri\n * @codeFilter param-str-to-json\n */\nexport const paramStrToJson = (url: string) => {\n  const search = getSearchParamStr(url);\n  if (!search) {\n    return {};\n  }\n  return search.split(`&`).reduce((params, param) => {\n    // handle \"key=value=string=me\";\n    const equalIndex = param.indexOf('=');\n    let paramsFragments: string[] = [];\n    if (equalIndex !== -1) {\n      paramsFragments = [\n        param.substr(0, equalIndex),\n        param.substr(equalIndex + 1),\n      ];\n    } else {\n      paramsFragments = [param];\n    }\n    const paramSplit = paramsFragments.map((value) => {\n      return decodeURIComponent(value.replace('+', ' '));\n    });\n    params[paramSplit[0]] = paramSplit[1];\n    return params;\n  }, {});\n};\n"],"names":["paramStrToJson","url","search","getSearchParamStr","split","reduce","params","param","equalIndex","indexOf","paramsFragments","substr","paramSplit","map","value","decodeURIComponent","replace"],"mappings":";kEAuBaA,EAAiB,SAAjBA,EAAkBC,GAC7B,IAAMC,EAASC,EAAkBF,GACjC,IAAKC,EAAQ,CACX,MAAO,CAAE,CACX,CACA,OAAOA,EAAOE,MAAK,KAAMC,QAAO,SAACC,EAAQC,GAEvC,IAAMC,EAAaD,EAAME,QAAQ,KACjC,IAAIC,EAA4B,GAChC,GAAIF,KAAe,EAAI,CACrBE,EAAkB,CAChBH,EAAMI,OAAO,EAAGH,GAChBD,EAAMI,OAAOH,EAAa,GAE9B,KAAO,CACLE,EAAkB,CAACH,EACrB,CACA,IAAMK,EAAaF,EAAgBG,KAAI,SAACC,GACtC,OAAOC,mBAAmBD,EAAME,QAAQ,IAAK,KAC/C,IACAV,EAAOM,EAAW,IAAMA,EAAW,GACnC,OAAON,CACR,GAAE,GACL"}