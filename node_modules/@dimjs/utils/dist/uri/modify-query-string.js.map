{"version":3,"file":"modify-query-string.js","sources":["@dimjs/utils/src/uri/modify-query-string.ts"],"sourcesContent":["import { isStandardBrowserEnv } from '@dimjs/lang';\nimport { paramStrToJson } from './param-str-to-json.js';\nimport { toQueryString } from './to-query-string.js';\n\nconst HASH_REGEX = /#(\\/)?.*/;\n\n/**\n * @description\n * Modifies the query string of a given URL by adding or updating the specified parameters.\n *\n *\n * @example\n * ``` ts\n * modifyQueryString('https://example.org/abc', { user: 0 });\n * // => 'https://example.org/abc?user=0'\n * modifyQueryString('https://example.org/abc?abc=123', { abc: '1234' };\n * // => 'https://example.org/abc?abc=1234'\n * ```\n *\n * @param url - The URL to modify.\n * @param params - The parameters to add or update in the query string.\n * @returns The modified URL with the updated query string.\n *\n * @docsCategory preference/utils/uri\n * @codeFilter modify-query-string\n */\nexport const modifyQueryString = (url: string, params: object) => {\n  url = url || (isStandardBrowserEnv() ? window.location.href : '');\n  const existedParams = paramStrToJson(url);\n  const existedHash = HASH_REGEX.exec(url);\n  for (const param in params) {\n    existedParams[param] = params[param];\n  }\n  const rootUrl = (existedHash ? url.replace(HASH_REGEX, '') : url).split(\n    '?'\n  )[0];\n  const querystr = toQueryString(existedParams);\n  const newUrl = !querystr\n    ? `${rootUrl}`\n    : `${rootUrl}?${toQueryString(existedParams)}`;\n  return `${newUrl}${existedHash ? existedHash[0] : ''}`;\n};\n"],"names":["HASH_REGEX","modifyQueryString","url","params","_isStandardBrowserEnv","window","location","href","existedParams","paramStrToJson","existedHash","exec","param","rootUrl","replace","split","querystr","toQueryString","newUrl","concat"],"mappings":";+SAIA,IAAMA,EAAa,WAsBZ,IAAMC,EAAoB,SAApBA,EAAqBC,EAAaC,GAC7CD,EAAMA,IAAQE,IAAyBC,OAAOC,SAASC,KAAO,IAC9D,IAAMC,EAAgBC,EAAeP,GACrC,IAAMQ,EAAcV,EAAWW,KAAKT,GACpC,IAAK,IAAMU,KAAST,EAAQ,CAC1BK,EAAcI,GAAST,EAAOS,EAChC,CACA,IAAMC,GAAWH,EAAcR,EAAIY,QAAQd,EAAY,IAAME,GAAKa,MAChE,KACA,GACF,IAAMC,EAAWC,EAAcT,GAC/B,IAAMU,GAAUF,EAAQG,GAAAA,OACjBN,GAAO,GAAAM,OACPN,OAAOM,OAAIF,EAAcT,IAChC,MAAA,GAAAW,OAAUD,GAAMC,OAAGT,EAAcA,EAAY,GAAK,GACpD"}