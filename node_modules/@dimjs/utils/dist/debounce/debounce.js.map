{"version":3,"file":"debounce.js","sources":["@dimjs/utils/src/debounce/debounce.ts"],"sourcesContent":["/**\n * @docsCategory preference/utils/debounce\n * @docsPage types-debounce\n */\nexport type Procedure = (...args) => void;\n\n/**\n * @docsCategory preference/utils/debounce\n * @docsPage types-debounce\n */\nexport interface DebounceOptions {\n  // if set to true then originalFunction will be called immediately, but on subsequent calls of the debounced function original function won't be called, unless waitMilliseconds passed after last call\n  isImmediate: boolean;\n}\n\n/**\n * @description\n * Debounce create a new function g, which when called will delay the invocation of the original function f until n milliseconds after it was last called.\n *\n * @example\n * ``` ts\n * const debouncedFunction = debounce(func, 100);\n * ```\n *\n * @param func the function which we want to debounce\n * @param waitMilliseconds how many seconds must pass after most recent function call, for the original function to be called\n * @param options\n *\n * @docsCategory preference/utils/debounce\n * @codeFilter debounce\n */\nexport function debounce<F extends Procedure>(\n  func: F,\n  waitMilliseconds = 50,\n  options: DebounceOptions = { isImmediate: false }\n) {\n  let timeoutId;\n  // Allow us dynamic bound `this`\n  return function (this, ...args) {\n    const shouldCallNow = options.isImmediate && timeoutId === undefined;\n\n    if (timeoutId !== undefined) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(() => {\n      timeoutId = undefined;\n      if (!options.isImmediate) {\n        func.apply(this, args);\n      }\n    }, waitMilliseconds);\n\n    if (shouldCallNow) {\n      func.apply(this, args);\n    }\n  };\n}\n"],"names":["debounce","func","waitMilliseconds","arguments","length","undefined","options","isImmediate","timeoutId","_this","this","_len","args","Array","_key","shouldCallNow","clearTimeout","setTimeout","apply"],"mappings":";AA+BO,SAASA,EACdC,GAGA,IAFAC,EAAgBC,UAAAC,OAAA,GAAAD,UAAA,KAAAE,UAAAF,UAAA,GAAG,GAAE,IACrBG,EAAwBH,UAAAC,OAAAD,GAAAA,UAAAE,KAAAA,UAAAF,UAAG,GAAA,CAAEI,YAAa,OAE1C,IAAIC,EAEJ,OAAO,WAAyB,IAAAC,EAAAC,KAAA,IAAA,IAAAC,EAAAR,UAAAC,OAANQ,EAAIC,IAAAA,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAA,CAAJF,EAAIE,GAAAX,UAAAW,EAAA,CAC5B,IAAMC,EAAgBT,EAAQC,aAAeC,IAAcH,UAE3D,GAAIG,IAAcH,UAAW,CAC3BW,aAAaR,EACf,CAEAA,EAAYS,YAAW,WACrBT,EAAYH,UACZ,IAAKC,EAAQC,YAAa,CACxBN,EAAKiB,MAAMT,EAAMG,EACnB,CACD,GAAEV,GAEH,GAAIa,EAAe,CACjBd,EAAKiB,MAAMR,KAAME,EACnB,CACD,CACH"}