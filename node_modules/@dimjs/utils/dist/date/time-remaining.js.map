{"version":3,"file":"time-remaining.js","sources":["@dimjs/utils/src/date/time-remaining.ts"],"sourcesContent":["import { dateFormat } from './date-format.js';\n\n/**\n * @description\n * Calculate how much time is left\n *\n * @note\n * format(hh时mm分ss秒)is required.\n *\n * @example\n * ``` ts\n * timeRemaining(10000, 'YYYY-MM-DD hh:mm:ss秒', '剩余');\n * // => 剩余10秒\n * timeRemaining(3600000, 'YYYY-MM-DD hh:mm:ss秒', '剩余');\n * // => 剩余1:00:00秒\n * ```\n *\n * @param currTime 20000 left the timestrap\n * @param format YYYY年MM月DD日 hh时mm分ss秒\n * @param prefix `剩余`\n * @returns 剩余23时58分\n *\n * @docsCategory preference/utils/date\n * @codeFilter time-remaining\n */\nexport const timeRemaining = (\n  currTime: number,\n  format = 'YYYY-MM-DD hh:mm:ss',\n  prefix = '剩余'\n): string => {\n  const orginalDate = new Date('2000/01/01');\n  const originalDataTick = orginalDate.getTime();\n  const originalFormatedDate = dateFormat(orginalDate, format);\n  const newDate = originalDataTick + currTime;\n  const newFormatedDate = dateFormat(new Date(newDate), format);\n  const newChars = newFormatedDate.split('');\n  const oldChars = originalFormatedDate.split('');\n  let diff = '';\n  for (let i = 0; i < newChars.length; i++) {\n    if (oldChars[i] !== newChars[i]) {\n      diff = newFormatedDate.substr(i);\n      break;\n    }\n  }\n  return diff ? prefix + diff : diff;\n};\n"],"names":["timeRemaining","currTime","format","arguments","length","undefined","prefix","orginalDate","Date","originalDataTick","getTime","originalFormatedDate","dateFormat","newDate","newFormatedDate","newChars","split","oldChars","diff","i","substr"],"mappings":";8EAyBaA,EAAgB,SAAhBA,EACXC,GAGW,IAFXC,EAAMC,UAAAC,OAAA,GAAAD,UAAA,KAAAE,UAAAF,UAAA,GAAG,sBAAqB,IAC9BG,EAAMH,UAAAC,OAAA,GAAAD,UAAA,KAAAE,UAAAF,UAAA,GAAG,KAET,IAAMI,EAAc,IAAIC,KAAK,cAC7B,IAAMC,EAAmBF,EAAYG,UACrC,IAAMC,EAAuBC,EAAWL,EAAaL,GACrD,IAAMW,EAAUJ,EAAmBR,EACnC,IAAMa,EAAkBF,EAAW,IAAIJ,KAAKK,GAAUX,GACtD,IAAMa,EAAWD,EAAgBE,MAAM,IACvC,IAAMC,EAAWN,EAAqBK,MAAM,IAC5C,IAAIE,EAAO,GACX,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAASX,OAAQe,IAAK,CACxC,GAAIF,EAASE,KAAOJ,EAASI,GAAI,CAC/BD,EAAOJ,EAAgBM,OAAOD,GAC9B,KACF,CACF,CACA,OAAOD,EAAOZ,EAASY,EAAOA,CAChC"}